export interface MockFile {
    basename: string
    path: string
    dirname: string
    extension: string
    size: number
    type: 'text' | 'binary'
    content: string | ArrayBuffer
}

// Create binary content (256 bytes: 0x00 to 0xFF)
function createBinaryContent(): ArrayBuffer {
    const buffer = new ArrayBuffer(256)
    const view = new Uint8Array(buffer)
    for (let i = 0; i < 256; i++) {
        view[i] = i
    }
    return buffer
}

// Create a more complex binary file (1KB with patterns)
function createComplexBinaryContent(): ArrayBuffer {
    const buffer = new ArrayBuffer(1024)
    const view = new Uint8Array(buffer)

    // Header pattern
    view[0] = 0x89
    view[1] = 0x50
    view[2] = 0x4E
    view[3] = 0x47 // PNG-like header

    // Fill rest with repeating pattern
    for (let i = 4; i < 1024; i++) {
        view[i] = (i * 7 + 13) % 256
    }
    return buffer
}

export const mockFiles: MockFile[] = [
    {
        basename: 'server.properties',
        path: '/server.properties',
        dirname: '/',
        extension: 'properties',
        size: 512,
        type: 'text',
        content: `# Minecraft server properties
# Generated by GameAP Debug Harness

server-port=25565
gamemode=survival
difficulty=normal
max-players=20
motd=A Minecraft Server
enable-command-block=false
spawn-protection=16
view-distance=10
online-mode=true
pvp=true
level-name=world
level-seed=
`,
    },
    {
        basename: 'server.cfg',
        path: '/cstrike/server.cfg',
        dirname: '/cstrike',
        extension: 'cfg',
        size: 384,
        type: 'text',
        content: `// Counter-Strike Server Configuration
// Generated by GameAP Debug Harness

hostname "My CS Server"
sv_maxrate 0
sv_minrate 128000
mp_autoteambalance 1
mp_friendlyfire 0
mp_timelimit 30
mp_roundtime 5
mp_freezetime 6
mp_startmoney 800
`,
    },
    {
        basename: 'config.json',
        path: '/config/config.json',
        dirname: '/config',
        extension: 'json',
        size: 256,
        type: 'text',
        content: JSON.stringify({
            version: '1.0.0',
            settings: {
                debug: true,
                logLevel: 'info',
                maxConnections: 100,
            },
            features: {
                autoSave: true,
                compression: false,
            },
        }, null, 2),
    },
    {
        basename: 'readme.txt',
        path: '/readme.txt',
        dirname: '/',
        extension: 'txt',
        size: 128,
        type: 'text',
        content: `GameAP Debug Harness
====================

This is a sample text file for testing text editors.
You can edit this content and test the save functionality.

Line with special chars: <>&"'
Unicode: Hello, Мир!
`,
    },
    {
        basename: 'sample.dat',
        path: '/data/sample.dat',
        dirname: '/data',
        extension: 'dat',
        size: 256,
        type: 'binary',
        content: createBinaryContent(),
    },
    {
        basename: 'complex.bin',
        path: '/data/complex.bin',
        dirname: '/data',
        extension: 'bin',
        size: 1024,
        type: 'binary',
        content: createComplexBinaryContent(),
    },
]

export function getFileContent(file: MockFile): string | ArrayBuffer {
    return file.content
}

export function getFileIcon(file: MockFile): string {
    if (file.type === 'binary') {
        return 'fa-solid fa-file-code'
    }

    switch (file.extension) {
        case 'json':
            return 'fa-solid fa-file-code'
        case 'cfg':
        case 'properties':
            return 'fa-solid fa-file-lines'
        case 'txt':
            return 'fa-solid fa-file'
        default:
            return 'fa-solid fa-file'
    }
}
